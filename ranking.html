<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="style.css" />
  <title>My Website</title>
</head>

<body>

  <object type="text/html" data="banner.html" class="bannerBox"></object>
  <div id="background"></div>
  <main>
    <div class="wrapper wrapper-center">
      <div class="introBox">
        <div class="tierListBox">
          <div class="tierList">
            <div class="tListTitle">Games</div>
            <div class="row ">
              <div class="tier tierS">S</div>
              <div class="tieredObjectsList">
                <div class="tieredObject" objectContext="" onclick="handleTieredObjectClick(event)" data-gameid="NierA">
                  <img src="./icons/100x100/NierAutomata.jpg">
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="tier tierA">A</div>
              <div class="tieredObjectsList">
                <div class="tieredObject"></div>
              </div>
            </div>
            <div class="row ">
              <div class="tier tierB">B</div>
              <div class="tieredObjectsList">
                <div class="tieredObject">

                </div>
              </div>
            </div>
            <div class="row ">
              <div class="tier tierC">C</div>
              <div class="tieredObjectsList">
                <div class="tieredObject"></div>
              </div>
            </div>
            <div class="row ">
              <div class="tier tierD">D</div>
              <div class="tieredObjectsList">
                <div class="tieredObject" objectContext="" onclick="handleTieredObjectClick(event)"
                  data-gameid="Shapez1">
                  <img src="./icons/100x100/shapezIcon.png">
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div id="infobox">
      <div id="infobox-wrapper">
        <div id="infobox-image">
          <img src="./icons/100x100/NierAutomata.jpg">
        </div>
        <div id="infobox-title">
        </div>
      </div>
      <p id="infobox-description"></p>
      <button onclick="TLCloseInfoBox()">Zamknij</button>
    </div>

  </main>
</body>


<script src="tierListScript.js"></script>

<script>

  function TLCloseInfoBox() {
    const infobox = document.getElementById('infobox');
    infobox.style.display = 'none';
  }

  function handleTieredObjectClick(event) {
    const gameId = event.currentTarget.dataset.gameid;
    console.log("Kliknięto grę o ID:", gameId);
    TLOpenInfoBox(gameId);
  }

  function TLOpenInfoBox(gameId) {

    var game;
    //const game = gameData.find(g => g.id === gameId);

    fetch("./data/gameData.json")
      .then(res => res.json())
      .then(data => {
        console.log(data); // [ {id:1, title:"Pierwszy wpis"}, ... ]

        
        game = data.find(g => g.id === gameId);
        const infobox = document.getElementById('infobox');
        const title = document.getElementById('infobox-title');
        const description = document.getElementById('infobox-description');


        document.querySelector("#infobox-image img").src = game.image;



        title.textContent = game.title;
        description.textContent = game.description;
        infobox.style.display = 'block';
      });









  }





  gameData = [
    {
      "id": "NierA",
      "title": "Nier Automata",
      "description": "Best game ever created.",
      "genre": "RPG",
      "releaseYear": "??",
      "image": "./icons/100x100/NierAutomata.jpg"
    },
    {
      "id": "Shapez1",
      "title": "Shapez",
      "description": "The reason D tier exists.",
      "genre": "Factory",
      "releaseYear": "???",
      "image": "./icons/100x100/shapezIcon.png"
    }
  ]




</script>

<script src="background.js"></script>


</html>